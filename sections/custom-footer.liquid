{%- comment -%}
 DEVELOPER NOTE:
 This code has been updated to match the target layout.
 - The layout is now centered, with Logo > Menus > Social Icons.
 - The 'description' and 'title' settings have been removed.
 - The 'footer__left' element has been removed and its content reorganized.
 - CSS has been modified to show menu links in horizontal rows on desktop while hiding the menu titles.
 - Mobile accordion logic remains unchanged.
 - Social media icons are now centered below the menu with a hardcoded "FOLLOW US" title.
{%- endcomment -%}

{%- style -%}
 /* --- Custom Footer Section --- */

 .footer {
  background-color: var(--color-background);
  color: var(--color-foreground);
  display:flex;
  flex-direction: column;
 }

 .footer__container {
  display: flex;
  flex-direction: column;
  align-items: center; /* Center all content */
  gap: 30px; /* Spacing between logo, menus, social */
  padding: 0 20px;
 }

 .footer__logo img {
  max-width: {{ section.settings.logo_width }}px;
  height: auto;
  margin: 0 auto;
 }

  .footer__follow-us {
    text-align: center;
    font-weight: 600;
    margin: 0;
    padding-top: 10px; /* Space above */
    margin-bottom: 15px; /* Space before icons */
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-size: 0.9rem;
  }

 .footer__social-icons {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
 }

 .social-icon__link {
  color: var(--color-foreground);
  transition: transform 0.2s ease-in-out;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
 }

 .social-icon__link:hover {
  transform: scale(1.1);
  color: var(--color-foreground); /* Ensure hover color is consistent */
 }

 .social-icon__link svg {
  width: 100%;
  height: 100%;
  fill: currentColor; 
 }

 .footer__right {
  display: flex;
  flex-direction: column;
  gap: 20px; /* Space between menu rows on mobile */
  text-align: center;
    width: 100%;
 }
  
  .footer__menu-column {
    width: 100%;
  }

 /* --- NEW ACCORDION STYLES START --- */
 .footer__accordion-toggle {
  width: 100%;
  background: none;
  border: none;
  color: inherit;
  text-align: center; /* Center mobile titles */
  font-size: 1.0rem; /* Adjusted size */
  font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  padding: 10px 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
 }

 .accordion-icon {
  position: relative;
  width: 16px;
  height: 16px;
 }

 .accordion-icon__bar {
  position: absolute;
  background-color: currentColor;
  transition: transform 0.3s ease-in-out;
 }

 .accordion-icon__bar--horizontal {
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  transform: translateY(-50%);
 }

 .accordion-icon__bar--vertical {
  top: 0;
  left: 50%;
  width: 2px;
  height: 100%;
  transform: translateX(-50%);
 }

 /* When expanded, rotate the vertical bar to form a '-' sign */
 .footer__accordion-toggle[aria-expanded="true"] .accordion-icon__bar--vertical {
  transform: translateX(-50%) rotate(90deg);
 }

 .footer__menu-list {
  list-style: none;
  margin: 0;
  padding:0;
  text-align: center; /* Center mobile links */
  overflow: hidden;
  max-height: 0; /* Initially collapsed */
  opacity: 0;
  transition: max-height 0.4s ease-out, opacity 0.3s ease-in, padding 0.4s ease-out;
 }

 /* When open, expand the menu with animation */
 .footer__menu-list.is-open {
  max-height: 300px; /* A value larger than the menu's content */
  opacity: 1;
    padding-bottom: 15px;
 }
  
  .footer__menu-list li {
    padding: 5px 0; /* Add spacing for mobile links */
  }

 .footer__menu-list a {
  text-decoration: none;
  color: inherit;
  font-size: 1rem; /* Adjusted size */
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 500;
   transition: font-weight .4s ease-in-out;
 }

 .footer__menu-list a:hover {
  font-weight: 700

 }
 /* --- NEW ACCORDION STYLES END --- */

 .copyright-banner {
  display: flex;
  justify-content: center; /* Center copyright */
  align-items: center;
  border-top: 1px solid #0c1c4f;
  padding: 15px;
  margin-top: 20px;
  text-align: center;
  background-color: #A57F59;
 }

 .copyright p {
  margin: 0;
  font-size: 1rem;
  color: var(--color-foreground);
 }

 /* Desktop override – Hide accordion title, show links as horizontal rows */
 @media screen and (min-width: 750px) {
  .footer__accordion-toggle {
   display: none; /* Hide the accordion button/title on desktop */
  }
  .footer__menu-list {
   display: flex !important;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem; /* Spacing between links */
   max-height: none !important; /* Override animation properties */
   opacity: 1 !important;
   padding: 0;
  }
    .footer__menu-list li {
      padding: 0; /* Remove mobile padding */
    }
 }

 /* --- Responsive Styles: Tablet and Up --- */
 @media screen and (min-width: 750px) {
  .footer__container {
   gap: 40px; /* Increase gap for desktop */
  }
  .footer__right {
      flex-direction: column; /* Stack menu rows vertically */
      align-items: center;
   gap: 20px; /* Space between the two link rows */
  }
 }

 .section-{{ section.id }}-padding {
  padding-top: {{ section.settings.padding_top }}px;
  padding-bottom: {{ section.settings.padding_bottom }}px;
 }

 @media screen and (min-width: 750px) {
  .section-{{ section.id }}-padding {
   padding-top: {{ section.settings.padding_top | times: 1.5 | round }}px;
   padding-bottom: {{ section.settings.padding_bottom | times: 1.5 | round }}px;
  }
 }
 @media(max-width: 768px) {
   .copyright-banner {
      /* This is already set to center, but we ensure it overrides */
      justify-content: center;
   flex-direction: column;
   text-align: center;
  }
  .social-icon__link {
   width: 24px;
   height: 24px;
  }
 }
{%- endstyle -%}

<footer class="footer color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding">
 <div class="page-width footer__container">
    
    {%- if section.settings.logo != blank -%}
   <div class="footer__logo">
    <a href="{{ routes.root_url }}">
     {%- assign logo_retina_width = section.settings.logo_width | times: 2 -%}
     <img
       src="{{ section.settings.logo | image_url: width: logo_retina_width }}"
       alt="{{ section.settings.logo.alt | default: shop.name | escape }}"
       width="{{ section.settings.logo_width }}"
       height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio | round }}"
       loading="lazy"
      >
     </a>
    </div>
  {%- endif -%}

  {%- assign footer_menu = linklists[section.settings.footer_menu] -%}
  {%- if footer_menu.links.size > 0 -%}
   <div class="footer__right">
    {%- for link in footer_menu.links -%}
     <div class="footer__menu-column">
      <button class="footer__accordion-toggle" aria-expanded="false">
       {{ link.title | escape }}
       <span class="accordion-icon">
        <span class="accordion-icon__bar accordion-icon__bar--horizontal"></span>
        <span class="accordion-icon__bar accordion-icon__bar--vertical"></span>
       </span>
      </button>
      {%- if link.links.size > 0 -%}
       <ul class="footer__menu-list">
        {%- for child_link in link.links -%}
         <li>
          <a href="{{ child_link.url }}">{{ child_link.title | escape }}</a>
         </li>
        {%- endfor -%}
       </ul>
      {%- endif -%}
     </div>
    {%- endfor -%}
   </div>
  {%- endif -%}

    <div> <h5 class="footer__follow-us">FOLLOW US</h5>
      <div class="footer__social-icons">
     {%- for block in section.blocks -%}
      {%- if block.type == 'social_icon' -%}
       <a
         href="{{ block.settings.link }}"
         class="social-icon__link"
         target="_blank"
         aria-label="{{ block.settings.aria_label | default: 'Social media link' | escape }}"
        >
         {{ block.settings.svg_code }}
        </a>
       {%- endif -%}
      {%- endfor -%}
     </div>
    </div>

 </div>
 <div class="copyright-banner">
  <div class="copyright"><p>© {{ 'now' | date: '%Y' }} Krini Furniture</p></div>
     </div>

 <script>
  document.addEventListener('DOMContentLoaded', function () {
   const accordions = document.querySelectorAll('.footer__accordion-toggle');

   accordions.forEach((btn) => {
    btn.addEventListener('click', () => {
     // Check screen width to disable accordion on desktop
     if (window.innerWidth >= 750) {
      return;
     }

     const expanded = btn.getAttribute('aria-expanded') === 'true';
     btn.setAttribute('aria-expanded', !expanded);

     const list = btn.nextElementSibling;
     if (list) {
      list.classList.toggle('is-open');
     }
    });
   });
  });
 </script>
</footer>

{% schema %}
{
 "name": "Custom Footer",
 "tag": "footer",
 "class": "footer-section",
 "settings": [
  {
   "type": "color_scheme",
   "id": "color_scheme",
   "label": "Color scheme",
   "default": "background-1"
  },
  {
   "type": "header",
   "content": "Menu Settings"
  },
  {
   "type": "link_list",
   "id": "footer_menu",
   "label": "Footer menu",
   "info": "Select the menu to display. Top-level items (e.g., 'Main Links', 'Info Links') will be titles on mobile and their nested items will become the links. On desktop, the titles are hidden and the nested links are shown in rows."
  },
  {
   "type": "header",
   "content": "Left Column Content"
  },
  {
   "type": "image_picker",
   "id": "logo",
   "label": "Logo image"
  },
  {
   "type": "range",
   "id": "logo_width",
   "min": 50,
   "max": 250,
   "step": 5,
   "unit": "px",
   "label": "Logo width",
   "default": 150
  },
    {
   "type": "header",
   "content": "Section Padding"
  },
  {
   "type": "range",
   "id": "padding_top",
   "min": 0,
   "max": 100,
   "step": 4,
   "unit": "px",
   "label": "Padding top",
   "default": 36
  },
  {
   "type": "range",
   "id": "padding_bottom",
   "min": 0,
   "max": 100,
   "step": 4,
   "unit": "px",
   "label": "Padding bottom",
   "default": 36
  }
 ],
 "blocks": [
  {
   "type": "social_icon",
   "name": "Social Icon",
   "limit": 5,
   "settings": [
    {
     "type": "url",
     "id": "link",
     "label": "Link",
     "info": "The URL for the social media profile."
    },
    {
     "type": "text",
     "id": "aria_label",
     "label": "Accessibility Label",
     "info": "Describes the icon for screen readers, e.g., 'Follow us on X'."
    },
    {
     "type": "textarea",
     "id": "svg_code",
     "label": "SVG Icon Code",
     "info": "Paste your full SVG code. For best results, ensure the SVG is 24x24 and styled using 'stroke=\"currentColor\"' instead of a specific color."
    }
   ]
  }
 ],
 "presets": [
  {
   "name": "Custom Footer"
  }
 ]
}
{% endschema %}