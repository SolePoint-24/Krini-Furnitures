<div class="section-{{ section.id }}">
  <div class="image-text-carousel-wrapper {% if section.settings.image_position == 'right' %}image-right{% endif %}">
    <div class="image-carousel-container">
      <div class="swiper-container image-carousel">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            {% if block.type == 'image' %}
              <div class="swiper-slide">
                {% if block.settings.image != blank %}
                  <img
                    src="{{ block.settings.image | image_url: width: 1000 }}"
                    alt="{{ block.settings.image.alt | escape }}"
                    width="{{ block.settings.image.width }}"
                    height="{{ block.settings.image.height }}"
                    loading="lazy"
                  >
                {% else %}
                  {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <!-- Add Pagination -->
        <div class="swiper-pagination"></div>
        <!-- Add Navigation -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    </div>
    <div class="text-content-container">
      {% if section.settings.heading != blank %}
        <h2>{{ section.settings.heading }}</h2>
      {% endif %}
      {% if section.settings.text != blank %}
        <div class="rte">{{ section.settings.text }}</div>
      {% endif %}
      {% for block in section.blocks %}
        {% if block.type == 'text_item' %}
          <h3>{{ block.settings.title }}</h3>
          <p>{{ block.settings.description }}</p>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .section-{{ section.id }} {
    padding: 50px 0; /* Adjust padding as needed for desktop */
  }

  .image-text-carousel-wrapper {
    display: flex;
    align-items: center;
    max-width: 1200px; /* Adjust max-width as needed */
    margin: 0 auto;
    gap: 30px; /* Space between image and text */
    flex-direction: row; /* Default: image on left, text on right */
  }

  .image-text-carousel-wrapper.image-right {
    flex-direction: row-reverse; /* Image on right, text on left */
  }

  .image-carousel-container,
  .text-content-container {
    flex: 1; /* Both containers take equal width */
  }

  .image-carousel-container {
    position: relative;
    width: 100%;
    overflow: hidden; /* Important for carousel */
  }

  .swiper-container {
    width: 100%;
    height: auto;
  }

  .swiper-slide img {
    width: 100%;
    height: auto;
    display: block;
  }

  .text-content-container h2 {
    font-size: 2.5em; /* Adjust heading size */
    margin-bottom: 20px;
  }

  .text-content-container .rte p {
    line-height: 1.6;
    margin-bottom: 15px;
  }

  .text-content-container h3 {
    font-size: 1.5em;
    margin-top: 25px;
    margin-bottom: 10px;
  }

  /* Swiper navigation and pagination styles (basic) */
  .swiper-button-next, .swiper-button-prev {
    color: #333;
  }
  .swiper-pagination-bullet-active {
    background: #333;
  }

  @media (max-width: 768px) {
    .image-text-carousel-wrapper {
      flex-direction: column; /* Stack on smaller screens */
      padding: 0 20px; /* Add horizontal padding to the wrapper on mobile */
      gap: 20px; /* Adjust gap for mobile */
    }
    .image-text-carousel-wrapper.image-right {
      flex-direction: column; /* Still stack, order doesn't matter as much */
    }
    .section-{{ section.id }} {
      padding: 30px 0; /* Adjust vertical padding for the whole section on mobile */
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var swiper = new Swiper('.section-{{ section.id }} .image-carousel', {
      loop: true,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      autoplay: {
        delay: 5000, // 5 seconds
        disableOnInteraction: false,
      },
    });
  });
</script>

{% schema %}
{
  "name": "Image with Text Carousel",
  "settings": [
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Comfort and Ergonomics"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description Text",
      "default": "<p>The furniture should be designed with comfort in mind, especially for items like beds, sofas, and chairs. Ergonomic design principles should be applied to desk chairs, ensuring proper support for guests who may need to work or use a laptop.</p>"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Carousel Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    },
    {
      "type": "text_item",
      "name": "Text Item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Item Title",
          "default": "Durability and Quality"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Item Description",
          "default": "Select hotel and motel furniture is subjected to frequent use, it should be made from high-quality materials that can withstand wear and tear. Consider using materials like solid wood, metal frames, or high-grade plastics for durability."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image with Text Carousel",
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "text_item"
        },
        {
          "type": "text_item"
        }
      ]
    }
  ]
}
{% endschema %}
