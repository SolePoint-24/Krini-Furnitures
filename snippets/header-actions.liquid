<script
  type="module"
  src="{{ 'cart-icon.js' | asset_url }}"
  fetchpriority="low"
></script>

<header-actions
  {{- block.shopify_attributes -}}
>
  {% if shop.customer_accounts_enabled %}
    {% render 'account-popover' %}
    {% render 'account-drawer' %}
  {% endif %}

  {% comment %} --- ADD COMPARE ICON HERE --- {% endcomment %}
  <a href="/pages/compare" class="header-actions__action header-icon header-icon--compare">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <polyline points="16 17 21 12 16 7"></polyline>
      <polyline points="8 17 3 12 8 7"></polyline>
      <line x1="21" y1="12" x2="3" y2="12"></line>
    </svg>
    <span class="header-icon__badge compare-count">0</span>
  </a>
  {% comment %} --- END COMPARE ICON --- {% endcomment %}

  {% if settings.cart_type == 'drawer' and template.name != 'cart' %}
    {% render 'cart-drawer' %}
  {% else %}
    <a
      href="{{ routes.cart_url }}"
      class="header-actions__action action__cart"
      aria-label="{{ 'accessibility.cart' | t }} {{ 'accessibility.cart_count' | t }}: {{ cart.item_count }}"
    >
      {% render 'cart-icon-component' %}
    </a>
  {% endif %}
</header-actions>

{% stylesheet %}
  /* ... (your existing cart CSS is here) ... */

  /* ▼▼▼ ADD THIS NEW CSS AT THE END (inside the stylesheet tag) ▼▼▼ */

  /* 1. Style the Compare Icon to match other icons */
  .header-icon--compare {
    position: relative; /* For the badge */
  }

  .header-icon--compare svg {
    width: var(--icon-size-md);
    height: var(--icon-size-md);
  }

  /* 2. Style the red count badge */
  .header-icon__badge.compare-count {
    position: absolute;
    top: -5px;   /* Adjust as needed */
    right: -8px; /* Adjust as needed */

    display: flex;
    align-items: center;
    justify-content: center;

    background-color: #e74c3c; /* Red */
    color: white;

    font-size: 10px;
    font-weight: bold;
    line-height: 1;

    min-width: 18px;
    height: 18px;
    padding: 2px;

    border-radius: 50%;
    box-sizing: border-box;

    /* Hide it by default, JS will show it */
    display: none;
  }

  /* ... (your existing header-actions CSS is here) ... */
{% endstylesheet %}
